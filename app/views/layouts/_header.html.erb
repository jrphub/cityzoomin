<!-- Dynamic Background -->
<%= javascript_include_tag 'application' %>
<!--gems overwrite the new structure of the default.js location-->
<style type="text/css">
#search {
	margin-top:14px;
}


#search input[type="text"] {
    background: url(/assets/search-white.png) no-repeat 10px 6px #444;
    border: 0 none;
    font: bold 12px Arial,Helvetica,Sans-serif;
    color: #d7d7d7;
    width:150px;
    padding: 6px 15px 6px 35px;
    -webkit-border-radius: 20px;
    -moz-border-radius: 20px;
    border-radius: 20px;
    text-shadow: 0 2px 2px rgba(0, 0, 0, 0.3); 
    -webkit-box-shadow: 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 3px rgba(0, 0, 0, 0.2) inset;
    -moz-box-shadow: 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 3px rgba(0, 0, 0, 0.2) inset;
    box-shadow: 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 3px rgba(0, 0, 0, 0.2) inset;
    -webkit-transition: all 0.7s ease 0s;
    -moz-transition: all 0.7s ease 0s;
    -o-transition: all 0.7s ease 0s;
    transition: all 0.7s ease 0s;
    }

#search input[type="text"]:focus {
    background: url(/assets/search-dark.png) no-repeat 10px 6px #fcfcfc;
    color: #6a6f75;
    width: 200px;
    -webkit-box-shadow: 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 0 rgba(0, 0, 0, 0.9) inset;
    -moz-box-shadow: 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 0 rgba(0, 0, 0, 0.9) inset;
    box-shadow: 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 0 rgba(0, 0, 0, 0.9) inset;
    text-shadow: 0 2px 3px rgba(0, 0, 0, 0.1);
    }


</style>
<div class="content">
	<div class="header">
		<div style="float:left;">
			<%unless signed_in?%>
				<a href="/"><img src="/assets/logo.png" alt="cityzoomin" width="90%"/></a>
			<%else%>
				<div style="float:left;">
				<a href="/"><img src="/assets/logo.png" alt="cityzoomin" width="60%" height="50%"/></a>
				</div>
				<div style="float:left;">
				<form id="search" action="/pages/result" method="get">
					<input type="text" name="s" id="s" placeholder="Search here..." required>
				</form>
				</div>
			<%end%>
		</div>
		<div style="float:right">
			<% if signed_in? %>
			<!--div style="color: #FFFFFF;font-size:12px;text-align:center;padding:20px;">
				Welcome! <%=current_user.username.titleize%>
				<%if current_user.admin?%>
				(Admin)
				<%end%>
			</div-->
			<nav id="topNav" style="margin-top:10px;">
        		<ul>
        			<li><%= gravatar_for_comment current_user%></li>
	            	<li><a href="/users/<%=session[:userid]%>" title="Profile" style="border-left:0px;"><%=current_user.username.titleize%></a></li>
	          		<li><%=link_to("Home", :microposts)%></li>
	          		<li><a href="#" title="others" style="margin-right:10px;">More</a>
	                	<ul>
	                        <li><a href="/microposts/index?view=only" title="Your Zoomin">Your CZ</a></li>
	                        <li><%= link_to("Image Wall", :image_wall) %></li>
	                        <li><%= link_to("Edit Profile", edit_user_path(current_user)) %></li>
	                       	<%if current_user.admin?%>
	                       		<%= link_to("All Users", :users) %>
	                       	<%end%>
	                        <li class="last"><%= link_to("Signout", signout_path, :method => :delete) %></li>
	                    </ul>        
	                </li>
                </ul>
        	</nav>
			<%else%>
			<!--do nothing-->
            <% end %>
       </div>
	</div>
	<%unless signed_in?%>
		<div style="height:130px;display:block;"></div>
	<%else%>
		<div style="height:70px;display:block;"></div>
	<%end%>
	
	<script type="text/javascript">
			(function($){
				
				//cache nav
				var nav = $("#topNav");
				
				//add indicator and hovers to submenu parents
				nav.find("li").each(function() {
					if ($(this).find("ul").length > 0) {
						$("<span>").text("^").appendTo($(this).children(":first"));

						//show subnav on hover
						$(this).mouseenter(function() {
							$(this).find("ul").stop(true, true).slideDown();
						});
						
						//hide submenus on exit
						$(this).mouseleave(function() {
							$(this).find("ul").stop(true, true).slideUp();
						});
					}
				});
			})(jQuery);
		</script>
